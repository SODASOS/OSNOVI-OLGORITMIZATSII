Задача 3. Список покупок с обработкой в функции
Создайте функцию add_to_cart(items, item, price), добавляющую товар в словарь {item: price}. Обработайте внутри функции: если price < 0, возбудите ValueError; если товар уже есть — обновите цену. В основном коде используйте try-except для перехвата и вывода "Товар не добавлен!". Используйте raise для повторного возбуждения, как в Листинге 7.1.7.
Пример:
Корзина: {'яблоки': 50}
Добавляем 'хлеб' за -10 → Ошибка: Цена не может быть отрицательной!
//////////////////////////////////////////////////////////////////////////////////////////////////////
using System;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        var shoppingCart = new Dictionary<string, decimal>();

        try
        {
            AddToCart(shoppingCart, "яблоки", 50);
            Console.WriteLine($"Корзина: {DictionaryToString(shoppingCart)}");

            AddToCart(shoppingCart, "хлеб", -10);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Ошибка: {ex.Message}");
        }

        Console.WriteLine($"Обновленная корзина: {DictionaryToString(shoppingCart)}");
    }

    static void AddToCart(Dictionary<string, decimal> items, string item, decimal price)
    {
        if (price < 0)
        {
            throw new ArgumentException("Цена не может быть отрицательной!");
        }

        if (items.ContainsKey(item))
        {
            // Обновляем цену
            items[item] = price;
        }
        else
        {
            // Добавляем новый товар
            items.Add(item, price);
        }
    }

    static string DictionaryToString(Dictionary<string, decimal> dict)
    {
        var items = new List<string>();
        foreach (var kvp in dict)
        {
            items.Add($"'{kvp.Key}': {kvp.Value}");
        }
        return "{" + string.Join(", ", items) + "}";
    }
}
